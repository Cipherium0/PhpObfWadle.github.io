<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doğrulama Sayfası</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h2>Doğrulama Şifresi</h2>
        <p><span id="verificationCode">Yükleniyor...</span></p>
        <!-- Şifreyi HTML içine yerleştiriyoruz -->
        <div id="verificationCodeSource" style="display: none;"></div>
    </div>

    <script>
        function generateVerificationCode() {
            // Şifreyi oluştur
            const code = Math.floor(100000 + Math.random() * 900000); // 6 haneli rastgele şifre

            // Şifreyi localStorage'da sakla
            localStorage.setItem("verificationCode", code);

            // URL'deki fragment kısmını güncelle
            window.location.hash = code;

            // Şifreyi sayfada göster
            document.getElementById("verificationCode").textContent = code;

            // Şifreyi sayfa kaynağında görünür hale getiriyoruz
            document.getElementById("verificationCodeSource").textContent = code;
        }

        // Sayfa yüklendiğinde, localStorage'dan şifreyi al ve ekrana yazdır
        if(localStorage.getItem("verificationCode")) {
            const savedCode = localStorage.getItem("verificationCode");
            document.getElementById("verificationCode").textContent = savedCode;
            // URL'deki fragment kısmını da güncelle
            window.location.hash = savedCode;

            // Şifreyi sayfa kaynağında görünür hale getiriyoruz
            document.getElementById("verificationCodeSource").textContent = savedCode;
        } else {
            // Eğer localStorage'da şifre yoksa, yeni şifre oluştur
            generateVerificationCode();
        }

        // Her 2 dakikada bir şifreyi güncelle
        setInterval(generateVerificationCode, 120000);
    </script>

</body>
</html>
